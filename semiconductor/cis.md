# CMOS

CMOS (Complementary Metal-Oxide-Semiconductor), 互补金属氧化物半导体, 是一种集成电路制造技术, 也是一种常见的逻辑家族, 在数字集成电路中，CMOS 技术被广泛应用于制造处理器、存储器、传感器、逻辑门等各种电子设备

# 逻辑家族

在数字电路设计中，逻辑家族指的是一组具有相似逻辑特性和电气特性的集成电路

常见的逻辑家族:

1. TTL (Transistor-Transistor Logic): 使用双极型晶体管构建的逻辑家族，速度较快，但功耗较高

2. CMOS: 使用互补金属氧化物半导体技术构建的逻辑家族，功耗低，集成度高

3. ECL (Emitter-Coupled Logic): 发射极耦合逻辑，速度非常快，但功耗高

4. RTL (Resistor-Transistor Logic): 电阻-双极型晶体管逻辑，用于早期的数字电路设计

5. FPGA (Field-Programmable Gate Array): 可编程门阵列，不是传统的逻辑家族，但提供了可编程逻辑功能

SOC 芯片通常用于嵌入式系统、移动设备、智能家居等领域

# CIS

CIS (CMOS Image Sensor), 互补金属氧化物半导体图像传感器

是一种集成在单个芯片上的图像传感器, 用于将光学图像转换为电子信号, 是数字相机、手机摄像头和许多其他设备中常用的图像传感器类型之一

CIS 相对于传统的 CCD (电荩波耦合器件图像传感器) 具有许多优势，包括低功耗、集成度高、成本低等

-   优点:

    -   低功耗: CMOS 技术本身具有低功耗特性, 使得 CIS 在移动设备等对功耗要求较高的应用中具有优势.

    -   集成度高: CMOS 技术能够实现高度集成, 使得 CIS 可以集成更多的功能, 如信号处理, 模拟数字转换等, 从而简化整个系统设计.

    -   良好的噪声特性: CMOS 图像传感器通常具有较好的噪声控制能力, 有利于提高图像质量.

    -   成本较低: 相对于其他图像传感器制造技术, CMOS 图像传感器的制造成本较低.

-   缺点:

    -   灵敏度相对较低: 与一些专用图像传感器相比, CMOS 图像传感器的灵敏度可能较低.

    -   动态范围受限: CMOS 图像传感器的动态范围可能受到一定限制, 这可能会在某些高要求的应用中受到影响.

-   应用场景:

    -   消费类电子产品: 如智能手机, 平板电脑, 数码相机等, 由于 CIS 具有低功耗, 集成度高等优势, 被广泛应用于这些产品中.

    -   安防监控: CIS 在安防监控领域也有广泛应用, 可用于监控摄像头, 视频会议设备等.

    -   医疗影像: CMOS 图像传感器在医疗影像设备中也有应用, 如 X 射线成像, 内窥镜等.

专用图像传感器通常指针对特定应用场景而设计的图像传感器, 例如专门用于低光条件下拍摄的低照度传感器或用于高动态范围场景的 HDR (高动态范围) 传感器等.这些专用传感器在特定方面通常具有比 CIS 更高的性能，如更高的灵敏度、更广泛的动态范围等.

在动态范围受限方面，动态范围是指图像传感器能够捕获的亮度范围，即从最暗到最亮的范围. 动态范围较大的传感器能够同时捕获细节丰富的阴影和亮部，产生更具视觉吸引力和信息丰富度的图像. 而动态范围受限的 CMOS 图像传感器可能无法在同一图像中准确捕获极暗和极亮的细节，导致图像在这些区域失真或丢失细节.

这种限制可能会在需要对比度较高的场景中产生影响，如在拍摄高对比度场景 (同时包含非常明亮和非常暗的区域) 时. 在这种情况下，动态范围受限的 CMOS 图像传感器可能无法准确捕获整个场景的细节，导致亮部过曝或暗部细节丢失，从而影响图像质量和信息的完整性.

因此，对于一些对图像质量要求较高、需要捕获广泛亮度范围的应用，如专业摄影、广告拍摄、医学影像等领域，动态范围受限的 CMOS 图像传感器可能无法满足需求，因为这些应用对图像细节和色彩准确性有较高要求. 在这些情况下，专用图像传感器可能更适合，因为它们通常具有更广泛的动态范围和更高的灵敏度，能够更好地满足这些高要求的应用场景.

# CIS vs logic

## DIFF

-   CIS 制程中 IMP 步骤离子注入用于调节感光元件的电性能
-   Logic chip 制程中 IMP 步骤离子注入步骤可能不常见, 因为焦点是在电路逻辑功能上

## TF

-   CIS 制程中 CVD 步骤用于沉积薄膜在像素结构和感光元件上
-   Logic chip 制程中 CVD 步骤用于沉积多层金属导线, 绝缘层等
-   CIS 制程中 CMP 步骤用于平整化像素结构和感光元件
-   Logic chip 制程中 CMP 步骤用于凭证复杂的电路结构

## LITHO

-   CIS 制程中 LITHO 步骤主要用于定义像素结构, 感光元件的形状
-   Logic chip 制程中 LITHO 步骤更不服, 用于定义大量逻辑门, 存储单元等复杂电路结构

## ETCH

-   CIS 制程中 ETCH 步骤用于去除不需要的材料, 以形成稳定结构
-   Logic chip 制程中 ETCH 步骤设计更复杂的结构, 如多层金属线路的刻蚀

# SOC

SOC (System-on-chip), 是一种集成了多个功能模块或组件的芯片，包括处理器核心、内存、输入/输出接口、通信模块等，以实现完整的系统功能

edge ai + CIS 某种程度上可以被称为 SOC

e.g. CIS + ASIC (Application-Specific Integrated Circuit) + NN (Neural Network); CIS + AI + MCU (Microcontroller Unit)

CIS 用于捕获图像数据, 将光学信号转换为数字图像

ASIC 是专门为特定应用定制设计的集成电路, 可以实现高度定制化的功能, 在结合 CIS 和 ASIC 时，ASIC 可以用于处理 CIS 捕获的图像数据，进行特定的图像处理、分析和决策, ASIC 可以根据具体的应用需求，设计和优化特定的图像处理算法和功能模块，以提高系统性能和效率

将神经网络集成到 CIS 和 ASIC 系统中，可以实现智能图像处理和决策能力，例如目标检测、图像识别、实时跟踪等功能, 可以通过学习和训练识别图像中的模式和特征，从而使系统具备智能决策能力

MCU vs ASIC

1. 设计和用途

    - MCU 是一种集成了处理器核心、存储器、输入/输出接口和定时器等功能的单芯片微处理器，通常用于控制嵌入式系统中的各种设备和执行特定任务，如传感器数据采集、控制执行等
    - ASIC 是一种专门定制的集成电路，根据特定应用的需求进行设计和制造. ASIC 的设计是为了在特定应用中实现特定功能或性能，通常用于高性能计算、专用加速、图像处理等领域

2. 灵活性

    - MCU 通常具有更高的灵活性，可以编程执行各种不同的任务和功能，适用于广泛的应用领域
    - ASIC 是为特定应用而设计的，功能固定，不具备灵活性，但在特定任务上通常具有更高的性能和效率

3. 成本

    - 通常来说，ASIC 的设计和制造成本较高，适用于大量生产并需要高性能和定制化功能的场景
    - MCU 的成本相对较低，适用于中小规模生产和需要较高灵活性的应用

4. 功耗

    - ASIC 通常设计为在特定任务上实现高效能力，因此在功耗方面可以更加优化
    - MCU 通常设计为在低功耗下运行，适用于需要长时间运行的嵌入式系统

光谱 (Spectrum) vs RGB vs 灰度图 (Grayscale image)

-   Spectrum 是指整个可见光谱范围内的颜色表示, 涵盖了从红色到紫色的所有颜色，每种颜色对应着不同的波长, 是一种更广泛的颜色表示方式，而不仅仅局限于 RGB 颜色空间
-   RGBRGB 是一种颜色模型, 在数字图像处理中，每个像素的颜色可以通过 RGB 值来表示，每个通道的值范围通常是 0 到 255
-   Grayscale image 是一种只包含灰度信息的图像，没有彩色信息. 即在灰度图中，每个像素的值表示灰度级别，通常在 0 (黑色) 到 255 (白色) 之间. 灰度图是一种单通道图像，与 RGB 图像相比，它只包含亮度信息，而不包含颜色信息

可以认为, 在 CV 中, RGB image -> Grayscal image, 三通道 -> 单通道, 在处理速度和存储方面更高效, 降低计算复杂度, 加快训练速度; 光谱概念更多与光学和传感器技术有关,例如光谱分析、光谱成像等领域, 即 CV 任务一般不需要光谱数据

对于嵌入式系统 (如 MCU), 彩色图像需要更多的计算资源和存储空间, 所以要用到 WLO (Wafer Level Optic) 晶圆光学, 已知的是把一篇 8 吋镜片直接叠在 wafer 上, 相当于两片重叠, 然后获取图像数据的时候每次读 4 列 (设计为类似于麦克风阵列的光谱检测阵列), 只有 288k (还包含所有固件、软件, 所以 320 x 320 图片数据 远低于这个值), 而且其中 144k 使里面 operation 用的, 也就是没有大算力 (解决隐私问题和联网问题), 但是单芯片能做 AI 任务

诺磊 NB100X 系列中的 2×3 阵列有 6 颗小芯片(18mm), 即 6 个 SOC 并行运算, 就是 6 颗一般算力加在一起用, 让他可以做海量的图像数据并行处理, 且扩展性很高, 用的模块式 IC 涉及, 功耗可控 (随时关闭不需要用的芯片), 不怕坏 (6 颗中有坏了的, 也可以用另一颗替代???但是不是一颗做一个任务吗), 系列中还有 2x2 阵列, 3x3 阵列, 4x1 阵列 (NB1001, 功耗仅有 0.3W)

1. 还可以做成光谱的矩阵. 人是两个眼睛的，所以可以看到立体，四个眼睛看的立体更强烈，这是用在光谱上，所以说这一个里面可以做不同镜头的角度
2. 可以做不同的光谱
3. 应用很多, 医疗健康 (健康追踪尿液检查/非侵入式健康检查/医疗机器功能扩充), 智能生态 (手机功能扩充,/ADAS 自动驾驶功能扩充/珠宝金矿石高订材质坚定), 环保安全 (环境监督及管理/无人机/食品安全)

spectrum（光谱）可以用在哪里，可以用在调光、摄像头图像增强、增强现实等方面，单颗的放在 VR 里面，就是我们实际上放在眼镜里面，追踪你眼球的移动. 这是眨眼，再看另外一边. 不管眼球转多快，都会跟得上. 这里面没有什么所谓的高算力，对 IC 来说是很简单的事

# CIS 架构

CMOS IMAGE SENSOR 由大量的像素阵列组成，每个像素都包含光感受器和信号处理电路

1. 像素阵列: CMOS 图像传感器由成千上万个像素组成的阵列构成. 每个像素负责捕获光线并将其转换为电信号
2. 光感受器: 每个像素都包含一个光感受器，通常是光电二极管（photodiode）. 光感受器负责将光信号转换为电荷
3. 信号处理电路: 每个像素还包含信号处理电路，用于处理从光感受器中生成的电荷. 这些电路包括放大器、模数转换器 (ADC/Analog-to-Digital Converter) 等
4. 列选择器: 在像素阵列的顶部有一组列选择器，用于选择要读取的像素行
5. 行选择器: 在像素阵列的侧面有一组行选择器，用于选择要读取的像素列
6. 控制逻辑: CMOS 图像传感器还包含控制逻辑，用于协调像素的操作、信号的传输以及整体的工作
7. 输出引脚: 最终，通过输出引脚，传感器将处理后的图像数据传输给外部设备，如处理器或存储器

光电二极管将 RGB 光的强度 转化为 电流的大小, 输出为 电压的大小

图像 -> 电信号过程: 每个像素点 RGB 强度 -> 光电二极管通过电路转化一定比例的电流

CMOS 图像传感器中, 一般每个像素通常包含一个光电二极管 (Photodiode)，用于捕获光信号并将其转换为电荷, 这些电荷随后通过信号处理电路进行放大和数字化，最终形成图像数据

一般包含带 vdd 的电路越多, 对图像的分辨率越高, 画质越精细

一般传感器尺寸越大, 各感光像素点的尺寸越大, 电路面积越大, 受干扰性越强, 即使在阴暗处 (光强度区分不明显处) 也能很好的辨别颜色, 简而言之就是尺寸越大, 性能越好

图像传感器的基本单位: 像素

一般是光信号 -> 片上微透镜阵列 (On-Chip Microlens Array) -> 片上彩色滤波器阵列 (On-Chip Color Filter Array) -> 介质材料 (Dielectric Material) -> 遮光层 (Light Sheild) -> 二极管 (Photodiode) (n+ -> P) -> 衬底

前照式 CMOS: 光线 -> microlens (微透镜) -> color filter (颜色过滤器) -> metal wiring (金属排线) -> substrate (光电二极管)

背照式 CMOS: 光线 -> microlens (微透镜) -> color filter (颜色过滤器) -> substrate (光电二极管) -> metal wiring (金属排线)

由于传统 CMOS 传感器的金属布线在光电二极管上面, 因此会遮挡住一部分入射的光线, 减少光通量, 还会造成噪声, 所以目前大部分 CMOS 传感器均采用背照式传感器, BSI (Back side illumination) 技术来构建像素, 光线无需穿过金属排线, 光线几乎没有阻挡和干扰的就到达了光电二极管, 光线利用率高

CMOS 填充系数: 填充因子: 像素中感光区域面积比像素面积比率

`FF = (Apd / Apix) x 100%` Apd 指的是传感器横截面的 Aperture 光圈, Apix 指的是传感器横截面的 Pixel

非堆栈式 CMOS vs 堆栈式 CMOS: 像素区域和处理电路区域在一片 65nm 晶体管门极长度上, 而堆栈式是一片 65nm 的像素区域, 下面放一片 45nm 的处理电路区域, 效率更高, 处理电路上的晶体管数量能翻倍, 像素处理越快(nm 一般指的是半导体制造工艺技术的节点，表示晶体管的最小特征尺寸，即晶体管的门极长度, 而不是指硅片、批次或芯片的厚度)

还有一种填充系数是与微透镜的覆盖率, microlens 主要是汇聚光用的, 定义为微透镜覆盖像素的面积 / 像素的集合面积, 即透镜是否可以将整个像素的面积全部覆盖, 和 CMOS 填充系数一样, 与像素面积正相关

CMOS 传感器成像质量不仅受到 CMOS 填充系数的影响, 同时还会受到微透镜覆盖率的影响
